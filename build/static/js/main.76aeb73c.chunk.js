(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{14:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(4),i=n.n(a),u=(n(14),n(5)),o=n(3),s=n(2),b="PAUSE",j="RESUME",l="MOVE_LEFT",f="MOVE_RIGHT",O="ROTATE",d="MOVE_DOWN",h="GAME_OVER",v="RESTART",g=function(){return{type:l}},m=function(){return{type:f}},p=function(){return{type:O}},x=function(){return{type:d}},R=n(9),y=function(){for(var e=[],t=0;t<18;t++){e.push([]);for(var n=0;n<10;n++)e[t].push(0)}return e},k=[[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],[[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]]],[[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,0,0],[0,0,1,0],[0,1,1,0],[0,1,0,0]]],[[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]]],[[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]]],E=function(){return e=1,t=k.length-1,Math.floor(Math.random()*(t-e+1))+e;var e,t},N=function(){return{grid:y(),shape:E(),rotation:0,x:5,y:-4,nextShape:E(),isRunning:!0,score:0,speed:1e3,gameOver:!1}},A=function(e,t){return(t+1)%k[e].length},C=function(e,t,n,r,c){for(var a=k[e][c],i=t[0].length-1,u=t.length-1,o=0;o<a.length;o++)for(var s=0;s<a[o].length;s++)if(0!==a[o][s]){var b=s+n,j=o+r,l=t[j];if(b<0||b>i||j>u)return!1;if(void 0!==l&&0!==l[b])return!1}return!0},S=function(e,t,n,r,c){for(var a=!1,i=k[e][c],u=Object(R.a)(t),o=0;o<i.length;o++)for(var s=0;s<i[o].length;s++){if(i[o][s])o+r<0?a=!0:u[o+r][s+n]=e}return{grid:u,gameOver:a}},T=function(e){for(var t=0,n=0;n<e.length;n++)-1===e[n].indexOf(0)&&(t+=1,e.splice(n,1),e.unshift(Array(10).fill(0)));return[0,40,100,300,1200][t]},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N(),t=arguments.length>1?arguments[1]:void 0,n=e.shape,r=e.grid,c=e.x,a=e.y,i=e.rotation,u=e.nextShape,o=e.score,g=e.isRunning;switch(t.type){case b:return Object(s.a)(Object(s.a)({},e),{},{isRunning:!1});case j:return Object(s.a)(Object(s.a)({},e),{},{isRunning:!0});case l:return C(n,r,c-1,a,i)?Object(s.a)(Object(s.a)({},e),{},{x:c-1}):e;case f:return C(n,r,c+1,a,i)?Object(s.a)(Object(s.a)({},e),{},{x:c+1}):e;case O:var m=A(n,i);return C(n,r,c,a,m)?Object(s.a)(Object(s.a)({},e),{},{rotation:m}):e;case d:var p=a+1;if(C(n,r,c,p,i))return Object(s.a)(Object(s.a)({},e),{},{y:p});var x=S(n,r,c,a,i),R=x.grid,y=x.gameOver;if(y){var k=Object(s.a)({},e);return k.shape=0,k.grid=R,Object(s.a)(Object(s.a)({},e),{},{gameOver:!0})}var F=N();return F.grid=R,F.shape=u,F.nextShape=E(),F.score=o,F.isRunning=g,C(u,R,0,4,0)?(F.score=o+T(R),F):(console.log("Game Over"),F.shape=0,Object(s.a)(Object(s.a)({},e),{},{gameOver:!0}));case h:return e;case v:return N();default:return e}},M=Object(u.a)({game:F}),w=(n(21),n(1));function L(e){var t="grid-square color-".concat(e.color);return Object(w.jsx)("div",{className:t})}function P(e){var t=Object(r.useRef)(),n=Object(r.useRef)(0),c=Object(r.useRef)(0),a=Object(o.b)(),i=Object(o.c)((function(e){return e.game})),u=i.grid,s=i.shape,b=i.rotation,j=i.x,l=i.y,f=i.isRunning,O=i.speed,d=k[s][b],h=s,v=u.map((function(e,t){return e.map((function(e,n){var r=n-j,c=t-l,a=e;r>=0&&r<d.length&&c>=0&&c<d.length&&(a=0===d[c][r]?a:h);var i=t*u[0].length+n;return Object(w.jsx)(L,{color:a},i)}))})),g=function e(r){if(t.current=requestAnimationFrame(e),f){n.current||(n.current=r);var i=r-n.current;c.current+=i,c.current>O&&(a(x()),c.current=0),n.current=r}};return Object(r.useEffect)((function(){return t.current=requestAnimationFrame(g),function(){return cancelAnimationFrame(t.current)}}),[f]),Object(w.jsx)("div",{className:"grid-board",children:v})}function D(e){var t=Object(o.c)((function(e){return e.game.nextShape})),n=k[t][0].map((function(e,n){return e.map((function(e,r){return Object(w.jsx)(L,{color:0===e?0:t},"".concat(n).concat(r))}))}));return Object(w.jsx)("div",{className:"next-block",children:n})}function G(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.game})),r=n.score,c=n.isRunning,a=n.gameOver;return Object(w.jsxs)("div",{className:"score-board",children:[Object(w.jsx)("div",{children:"Score:"}),Object(w.jsx)("div",{children:r}),Object(w.jsx)("div",{children:"Level:"}),Object(w.jsx)("div",{children:"1"}),Object(w.jsx)("button",{className:"score-board-button",onClick:function(e){a||t(c?{type:b}:{type:j})},children:c?"Pause":"Play"}),Object(w.jsx)("button",{className:"score-board-button",onClick:function(e){t({type:v})},children:"Restart"})]})}function V(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.game.isRunning})),c=Object(o.c)((function(e){return e.game.gameOver})),a=function(e){if(n&&!c)switch(e.keyCode){case 37:case 65:if(!n||c)return;t(g());break;case 39:case 68:if(!n||c)return;t(m());break;case 38:case 87:e.preventDefault(),t(p());break;case 40:case 83:e.preventDefault(),t(x());break;default:return}};return Object(r.useEffect)((function(){return document.addEventListener("keydown",a),function(){document.removeEventListener("keydown",(function(){console.log("removed")}))}}),[]),Object(w.jsxs)("div",{className:"controls",children:[Object(w.jsx)("button",{disabled:!n||c,className:"control-button",onClick:function(e){n&&!c&&t(g())},children:"Left"}),Object(w.jsx)("button",{disabled:!n||c,className:"control-button",onClick:function(e){n&&!c&&t(m())},children:"Right"}),Object(w.jsx)("button",{disabled:!n||c,className:"control-button",onClick:function(e){n&&!c&&t(p())},children:"Rotate"}),Object(w.jsx)("button",{disabled:!n||c,className:"control-button",onClick:function(e){n&&!c&&t(x())},children:"Down"})]})}function _(e){var t=Object(o.c)((function(e){return e.game.isRunning})),n="",r="hidden";return Object(o.c)((function(e){return e.game.gameOver}))?(n="Game Over",r=""):t||(n="Paused",r=""),Object(w.jsx)("div",{className:"message-popup ".concat(r),children:Object(w.jsx)("h1",{children:n})})}var q=Object(u.b)(M);var I=function(){return Object(w.jsx)(o.a,{store:q,children:Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)("header",{className:"App-header",children:Object(w.jsx)("h1",{className:"App-title",children:"Tetrist"})}),Object(w.jsx)(P,{}),Object(w.jsx)(D,{}),Object(w.jsx)(G,{}),Object(w.jsx)(V,{}),Object(w.jsx)(_,{})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),a(e),i(e)}))};i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(I,{})}),document.getElementById("root")),B()}},[[23,1,2]]]);
//# sourceMappingURL=main.76aeb73c.chunk.js.map